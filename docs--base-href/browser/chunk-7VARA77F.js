import{a as A}from"./chunk-F5SMGSP3.js";import{a as L,b as S,c as P,d as k,e as G,g as O,h as U,i as V,j}from"./chunk-C654DL67.js";import"./chunk-RKKYYBNY.js";import{j as M}from"./chunk-SDYGKTLN.js";import{h as N,m as D}from"./chunk-CPMMQVYM.js";import{$a as h,Ab as p,Bb as u,Ja as t,Pb as R,Qb as q,W as v,Z as T,Za as _,bb as E,db as g,gb as o,hb as l,ib as x,kb as F,lb as C,sa as b,ub as s,vb as w,wb as c,yb as B,zb as y}from"./chunk-EV7S73YM.js";var $=(e,m)=>({"is-valid":e,"is-invalid":m});function z(e,m){e&1&&(o(0,"p",15),s(1),p(2,"translate"),l()),e&2&&(t(),c("",u(2,1,"login.email is required"),"."))}function H(e,m){e&1&&(o(0,"p",15),s(1),p(2,"translate"),l()),e&2&&(t(),c("",u(2,1,"login.enter valid email"),"."))}function J(e,m){if(e&1&&(o(0,"div",8),_(1,z,3,3,"p",15)(2,H,3,3),l()),e&2){let i,d=C();t(),g(1,(i=d.singIn.get("email"))!=null&&i.getError("required")?1:(i=d.singIn.get("email"))!=null&&i.getError("email")?2:-1)}}function K(e,m){e&1&&(o(0,"p",15),s(1),p(2,"translate"),l()),e&2&&(t(),c("",u(2,1,"login.password is required"),"."))}function Q(e,m){e&1&&(o(0,"p",15),s(1),p(2,"translate"),l()),e&2&&(t(),c("",u(2,1,"login.enter valid password"),"."))}function W(e,m){if(e&1&&(o(0,"div",8),_(1,K,3,3,"p",15)(2,Q,3,3),l()),e&2){let i,d=C();t(),g(1,(i=d.singIn.get("password"))!=null&&i.getError("required")?1:(i=d.singIn.get("password"))!=null&&i.getError("pattern")?2:-1)}}function X(e,m){e&1&&x(0,"span",12)}function Y(e,m){if(e&1&&(o(0,"p",13),s(1),l()),e&2){let i=C();t(),c(" ",i.messgerror," ")}}function Z(e,m){if(e&1&&(o(0,"p",14),s(1),l()),e&2){let i=C();t(),c(" ",i.messsuccess," ")}}var de=(()=>{class e{constructor(){this._UserService=v(A),this._FormBuilder=v(V),this._Router=v(M),this._PLATFORM_ID=v(b),this.messgerror="",this.messsuccess="",this.isloading=!1,this.singIn=this._FormBuilder.group({email:[null,[S.required,S.email]],password:[null,[S.required,S.pattern(/^\w{3,}$/)]]})}singInfunction(){this.singIn.valid?(this.isloading=!0,this.unsub=this._UserService.singin(this.singIn.value).subscribe({next:i=>{this.isloading=!1,this.messsuccess=i.msg,this.messgerror="",i.msg=="done"&&(localStorage.setItem("NodeToken",i.token),setTimeout(()=>{this._Router.navigate(["/node"])},1e3))},error:i=>{console.log(i),this.isloading=!1,this.messgerror=i.error.msg,this.messsuccess=""}})):this.singIn.markAllAsTouched()}LangText(){if(D(this._PLATFORM_ID)){if(localStorage.getItem("lang")!=null){if(localStorage.getItem("lang")=="en")return!0;if(localStorage.getItem("lang")=="ar")return!1}else if(localStorage.getItem("lang")==null)return!0}return!1}ngOnDestroy(){this.unsub?.unsubscribe()}static{this.\u0275fac=function(d){return new(d||e)}}static{this.\u0275cmp=T({type:e,selectors:[["app-signin"]],standalone:!0,features:[B],decls:26,vars:30,consts:[[1,"text-main","py-5","my-5"],[1,"theform","container","widthtitle","p-3","rounded-5","shadow-lg","bg-sign","my-5"],[1,"title"],[1,"my-3","border-bottom","border-secondary"],[3,"ngSubmit","formGroup"],[1,"my-2"],["for","email"],["id","email","type","email","formControlName","email",1,"form-control",3,"ngClass"],[1,"alert","alert-danger"],["for","password"],["id","password","type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","submit",1,"btn","px-3","py-1","btn-color","rounded-2","d-block"],[1,"fas","fa-spin","fa-spinner"],[1,"text-center","alert","alert-danger","w-100","mx-auto"],[1,"text-center","alert","alert-success","w-50","mx-auto"],[1,"m-0"]],template:function(d,n){if(d&1&&(o(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2",3)(4,"b"),s(5),p(6,"translate"),l()()(),o(7,"form",4),F("ngSubmit",function(){return n.singInfunction()}),o(8,"div",5)(9,"label",6),s(10),p(11,"translate"),l(),x(12,"input",7),_(13,J,3,1,"div",8),l(),o(14,"div",5)(15,"label",9),s(16),p(17,"translate"),l(),x(18,"input",10),_(19,W,3,1,"div",8),l(),o(20,"button",11),s(21),p(22,"translate"),_(23,X,1,0,"span",12),l()(),_(24,Y,2,1,"p",13)(25,Z,2,1,"p",14),l()()),d&2){let a,f,r,I;t(5),w(u(6,16,"login.Signin")),t(2),h("formGroup",n.singIn),t(3),w(u(11,18,"login.email")),t(2),h("ngClass",y(24,$,!((a=n.singIn.get("email"))!=null&&a.errors)&&(((a=n.singIn.get("email"))==null?null:a.touched)||((a=n.singIn.get("email"))==null?null:a.dirty)),((a=n.singIn.get("email"))==null?null:a.errors)&&(((a=n.singIn.get("email"))==null?null:a.touched)||((a=n.singIn.get("email"))==null?null:a.dirty)))),t(),g(13,(f=n.singIn.get("email"))!=null&&f.errors&&((f=n.singIn.get("email"))!=null&&f.touched||(f=n.singIn.get("email"))!=null&&f.dirty)?13:-1),t(3),w(u(17,20,"login.password")),t(2),h("ngClass",y(27,$,!((r=n.singIn.get("password"))!=null&&r.errors)&&(((r=n.singIn.get("password"))==null?null:r.touched)||((r=n.singIn.get("password"))==null?null:r.dirty)),((r=n.singIn.get("password"))==null?null:r.errors)&&(((r=n.singIn.get("password"))==null?null:r.touched)||((r=n.singIn.get("password"))==null?null:r.dirty)))),t(),g(19,(I=n.singIn.get("password"))!=null&&I.errors&&((I=n.singIn.get("password"))!=null&&I.touched||(I=n.singIn.get("password"))!=null&&I.dirty)?19:-1),t(),E("ms-auto",n.LangText())("me-auto",!n.LangText()),t(),c(" ",u(22,22,"login.Signin")," "),t(2),g(23,n.isloading?23:-1),t(),g(24,n.messgerror?24:-1),t(),g(25,n.messsuccess?25:-1)}},dependencies:[j,G,L,P,k,O,U,N,q,R]})}}return e})();export{de as SigninComponent};
